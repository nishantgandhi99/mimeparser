%%%% ZAWARTO¦Æ OBLIGATORYJNA - NALE¯Y DOSTOSOWAÆ %%%%%%%%%%%%%%%%%%%%%%%%

%% Tytu³ opracowania
\title{Filtr protoko³u SMTP\\
%% Tu nale¿y podaæ nazwê przedmiotu, którego tyczy sprawozdanie.
\begin{small}
Praca in¿ynierska
\end{small}}

%% Autorzy opracowania, po dwie linie z nazwiskiem i adresem e-mail na
%% osobê. Ka¿dy opis oddzielony separatorem 'and'.
%% \author{Tomasz Jordan Kruk\\ T.Kruk@ia.pw.edu.pl \and Jan Nieznany\\ jn@n.pl}
\author{Zbigniew Artemiuk\\ Z.Artemiuk@stud.elka.pw.edu.pl}

% To stworzy w³a¶ciwy format tytu³u oraz spis tre¶ci.
\maketitle

\newpage

\tableofcontents



%%%% PONI¯EJ ZAWARTO¦Æ DOWOLNA %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Dokument podzielony powinien byæ na elementy: section, subsection,
% ewentualnie subsubsection.

\newpage

\section{Wstêp}

W dobie obecnego Internetu, pomimo szeregu rozwijaj±cych siê form komunikacji,
chocia¿by technologii takich jak tekstowa komunikacja czasu rzeczywistego (czyli
IM - instant messaging i popularne chaty) czy te¿ jeszcze bardziej zaawansowanych
technologii, które umo¿liwiaj± przesy³anie g³osu oraz wideo (chocia¿by Skype),
pospolite maile ca³y czas jednak znajduj± zastosowanie. U¿ywamy ich chyba obecnie najcze¶ciej
do kontaktów biznesowych, rodzinnych, przyjacielskich, g³ównie w celach informacyjnych
(czyli sam tekst), jak równie¿ do przekazywania niewielkich plików. Chyba ka¿dy obecny
internauta legitymuje siê przynajmniej jedn± skrzynk± mailow± (a czasami jest ich znacznie
wiêcej). Ka¿dy te¿ internauta spotka³ siê tak¿e z niechcian± poczt± (niechcianymi mailami), nazywan± bardzo 
ogólnym okre¶leniem Spam, i narzêdziami (chocia¿by tymi wbudowanymi w klientów pocztowych dostêpnych
 z poziomu przegl±darki internetowej), które umo¿liwiaj± odseparowanie takiej poczty, od tej
 która niesie interesuj±c± nas zawarto¶æ merytoryczn±. Separacja ta to tzw. filtrowanie ze
 wzglêdu na obiekt filtracji zwane filtracja poczty. Dokonanie filtracji wymaga jednak
 poznania dok³adnie w jaki sposób transportowane s± nasze maile, a to wszystko zawarte jest 
 w protokole Simple Mail Transfer Protocol (w skrócie SMTP).

\newpage

\section{Cel i zakres pracy}

Celem pracy jest zaprojektowanie systemu w jêzyku Java, który umo¿liwia³bym
przy pomocy dosyæ prostej konfiguracji w postaci pliku tekstowego,
jego uruchomienie oraz dokonywa³by filtracji, na podstawie regu³
zawartych w konfiguracji, przes³anych do niego protoko³em SMTP wiadomo¶ci.

\newpage

\section{Protokó³ SMTP}

\subsection{Historia powstania}

\subsubsection{ARPANET czyli pocz±tki Internetu}

Historia powstania protoko³u SMTP jest ¶ci¶le zwi±zana z pocz±tkami Internetu.
Internet za¶ i jego kreowanie zwi±zane jest bezpo¶rednio ze swoim przodkiem
czyli ARPANETEm.

ARPANET (Advanced Research Projects Agency Network) zosta³ stworzony przez
przez jedn± z agencji United States Department of Defense (departament
bezpieczeñstwa Stanów Zdjednoczonych) o nazwie ARPA (Advanced Research
Projects Agency). Nazwa agencji zosta³a pó¼niej przekszta³cona na DARPA (D od
Defence). Agencja ta mia³a zaj±c siê rozwojem nowych technologii na potrzebê
amerykañskiego wojska.

W miarê wchodzenia w ¿ycie komputerów wykorzystywanych w ramach agencji
powsta³a idea stworzenia sieci pomiêdzy nimi, która to umo¿liwi³aby
komunikacje pomiêdzy ich u¿ytkownikami. Idea ta zosta³a po raz pierwszy
zaproponowana przez Josepha Carla Robnetta Licklidera z firmy Bolt, Beranek and
Newman (obecnie BBN Technologies) w sierpniu 1962 w serii notatek na temat
koncepcji ''Miêdzygalaktycznej Sieci Komputerowej''. Zawiera³a ona prawie
wszystko czego mo¿emy do¶wiadczyæ w dzisiejszym Internecie.

W pa¼dzierniku 1963 roku Licklider zosta³ mianowany szefem programu Behavioral
Sciences and Command and Control w ARPA. Przekona³ on wtedy Ivana Sutherlanda i
Boba Taylora, ¿e jego wizja jest czym¶ naprawdê istotnym. Sam Licklider nie
doczeka³ jednak ¿adnych konkretnych prac w kierunku jej urzeczywistnienia, gdy¿
opu¶ci³ ARPA.

ARPA i Taylor ca³y czas byli zainteresowanie stworzeniem sieci komputerowej,
a¿eby zapewniæ naukowcom pracuj±cym w ramach ARPA w ró¿nych lokalizacjach,
dostêp do innych komputerów, które firma oferowa³a. Istotne by³o tak¿e, aby
nowe oprogramowanie i rezultaty badañ by³y jak najszybciej widoczne dla ka¿dego
u¿ytkownika sieci. Sam Taylor posiada³ 3 ró¿ne terminale, które dawa³y mu
pod³±czenie do 3 ró¿nych komputerów - jeden do SDC Q-32 w Santa Monica, drugi w
ramach projektu Project Genie do komputera na Uniwersytecie w Kalifornii
(Berkley) i ostatni do komputera z Multicsem w MIT (The Massachusetts Institute of Technology).

Taylor w taki sposób opowiada³ od pod³±czeniu do tych komputerów:
'' Dla ka¿dego z tych terminali mia³em inny zestaw poleceñ. Dlatego te¿ kiedy
rozmawia³em z kim¶ z Santa Monica, a po¼niej chcia³em ten sam temat
skonsultowaæ z kim¶ z Berkley albo MIT, musia³em przesi±¶æ siê do innego
terminala. Oczywistym wtedy wyda³o mi siê, ¿e musi byæ 1 terminal, który
obs³u¿y te 3 po³±czenia. Idea ta to w³a¶nie ARPANET''

Do po³owy 1968 roku kompletny plan sieci zosta³ stworzony i po zatwierdzeniu
przez ARPA, zapytanie ofertowe RFQ (Request For Quotation) zosta³o pos³ane do
140 potencjalnych wykonawców. Wiêkszo¶æ potraktowa³a propozycjê jako dziwaczn±.
Tylko 12 firm z³o¿y³o oferty z czego 4 zosta³y uznane za najwa¿niejsze. Do
koñca roku wy³oniono 2 firmy, z których ostatecznie 7 kwietnia 1969 roku
zosta³a wybrana firma BBN.

Propozycja BBN by³a najbli¿sza planom ARPA. Pomys³em ich by³o stworzenie sieci
z ma³y komputerów zwanych Interface Message Processors (bardziej znanych jako
IMPs), które to obecnie nazywamy routerami. IMPsy z ka¿dej strony zapewnia³y
funkcje przechowywania i przekazywania pakietów, a po³±czone by³y miêdzy sob±
przy u¿yciu modemów podpiêtych do ³±czy dzier¿awionych (o przepustowo¶ci 50
kbit/sekundê). Komputery pod³±czone by³y do IMPsów poprzez specjalny bitowy
interfejs. W ten sposób stawa³y siê one czê¶ci± sieci ARPANET.

Do zbudowania pierwszej generacji IMPsów BBN wykorzysta³a komputer Honeywell
DDP-516. Zosta³ on wyposa¿ony w 24kB pamiêci rdzenia (z mo¿liwo¶ci±
rozszerzenia) oraz 16 kana³ów Direct Multiplex Control (DMC) do bezpo¶redniogo
dostêpu do tej pamiêci. Poprzez DMC pod³±czane by³y komputery u¿ytkowników
(hosty) i modemy. Dodatkowo 516 otrzyma³ ezstaw 24 lamp, które pokazywa³y
status kana³ów komunikacyjnych IMPa. Do ka¿dego IMPa mo¿na by³o pod³±czyæ do
czterech hostów i móg³ siê on komunikowaæ z 6 zdalnymi IMPami poprzez
wspó³dzielone ³±cza.

Zespó³ z BBN (pocz±tkowo 7 osób) szybko stworzy³ pierwsze dzia³aj±ce jednoski
(IMPy). Ca³y system, który zawiera³ zarówno sprzêt jak i pierwsze
oprogramowania zarz±dzaj±ce pakietami, zosta³ zaprojektowany i zainstalowany w
ci±gu 9 miesiêcy.

Pocz±tkowo ARPANET sk³ada³ siê z 4 IMPów. Zosta³y one zainstalowane w:

\begin{itemize}
  \item UCLA (University of California, Los Angeles), gdzie Leonard Kleinrock
  za³o¿y³ centrum pomiaru sieci (Network Measurment Center)
  \item The Stanford Research Institute's Augmentation Research Center, gdzie
  Douglas Engelbert stworzy³ system NLS, który miêdzy innymi wprowadzi³ pojêcie
  hypertextu
  \item UC Santa Barbara
  \item The University of Utah's Graphics Department, gdzie przebywa³ ówcze¶nie
  Ivan Sutherland
\end{itemize}

\subsubsection{Piersze wiadomo¶ci w ARPANETcie}

Pierwsza komunikacja host-host w sieci ARPANET wykorzystywa³a protokó³ 1822,
który definiowa³ sposób w jakis host przesy³a³ wiadomo¶æ do IMPa. Format
wiadomo¶ci by³ tak zaprojektowany, ¿eby bez problemu móg³ pracowaæ z szerokim
zakresem architektur. Zasadniczo wiadomo¶æ sk³ada³a siê z:

\begin{itemize}
  \item typu wiadomo¶ci
  \item adresu hosta
  \item pola z danymi
\end{itemize}

W celu wys³ania wiadomo¶ci do innego hosta, host wysy³aj±cy powinien sformatowaæ
wiadomo¶æ tak, aby ta zawiera³a adres hosta docelowego oraz dane, a nastêpnie
dokonaæ transmisji wiadomo¶ci przez interfejs sprzêtowy 1822. IMP dostrze¿e
dostarczenie wiadomo¶ci albo poprzez dostarczenie jej bezpo¶rednio do hosta
docelowego albo poprzez przekazanie jej do kolejnego IMPa. Kiedy wiadomo¶æ
zosta³a odebrana przez docelowego hosta, IMP do którego host by³ pod³±czony
wysy³a potwierdzenie odbioru (zwane Ready for Next Message or RFNM) do hosta
wysy³aj±cego.

W przeciwieñstwie do obecnych protoko³ów datagramowych w Interecie (takich jak
no IP), ARPANETowy porotokó³ 1822 zapewnia³ niezawodno¶æ w taki sposób, ¿e
informowa³ o niedostarczonej wiadomo¶ci. Niemniej protokó³ 1822 nie by³
odpowiedni do ¿onglowania wieloma po³±czeniami w ró¿nych aplikacjach
uruchomionych na pojedynczym ho¶cie. Problem ten zosta³ rozwi±zany dziêki
wprowadzeniu na hostach Network Control Program (NCP), dziêki któremu mo¿liwe
by³o niezawodne, z kontro³± przep³ywu, dwukierunkowe po³±czenia pomiêdzy
ró¿nymi procesami na ró¿nych hostach. NCP implementowa³ kolejn± warstwê
znajduj±c± siê na górze stosu protoko³ów. Dziêki niemu aplikacje, które mia³y
mieæ ju¿ jak±¶ konkretn± funkcjonalno¶æ, mog³y wykorzystywaæ spójny interfejs i
korzystaæ swobodnie z dobrodziejstw ARPANETu czyli wykonywaæ po³±czenia do
innych aplikacji przez sieæ. 

Ju¿ nied³ugo, bo na pocz±tku roku 1970, powsta³ pierwszy program (a w
zasadzie 2 oddzielne) do wysy³ania i odbierania wiadomo¶ci. Zaimplementowa³ go
Ray Tomlinson podczas pracy w niewielkiej grupie nad systemem operacyjnym
TENEX. Programy te to SNDMSG i READMAIL. Pierwsza wersja tych programów s³u¿y³a
jednak do wymiany informacji miêdzy u¿ytkownikami jednej maszyny. Ju¿ jednak w
1971 Tomlinson stworzy³ pierwsz± aplikacjê ARPANETow±, która umo¿liwia³a
wysy³anie wiadomo¶ci do dowolnych hostów. Tomlinson dokona³ usprawnieñ w
programie SNDMSG przy okazji 



\subsection{Szczegó³y protoko³u}

Szczegó³y protoko³u

\subsubsection{Komunikacja klient-serwer}

Komunikacja

\subsubsection{Konstrukcja wiadomo¶ci}

Konstrukcja

\subsection{Obecne wykorzystanie protoko³u i jego forma}

Obecne wykorzystanie

\newpage

\section{Dzisiejsze narzêdzia do filtracji protoko³u SMTP}

Dzisiejsze

\subsection{Konieczno¶æ wprowadzenia filtracji}

Konieczno¶æ

\subsection{Produkty komercyjne}

Produkty komercyjne

\subsubsection{Clearswift}

Clearswift

\subsubsection{Aladdin eSafe}

Aladdin eSafe

\subsubsection{Surfcontrol Email Filter}

Surfcontrol Email Filter

\subsection{Produkty open-source}

\newpage

\section{W³asny projekt do filtracji poczty}

\subsection{Za³o¿enia projektu}

\subsection{Modu³y projektu}

\subsubsection{Parser wiadomo¶ci}

\subsubsection{Parser regu³}

\subsubsection{Analizator wiadomo¶ci}

\subsubsection{Kolejka}

\subsection{Kompilacja, konfiguracja i uruchomienie projektu}

\subsection{Testy wydajno¶ciowe}

\newpage

\section{Spostrze¿enia, wnioski}

\newpage

